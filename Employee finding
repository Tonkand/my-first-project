import spacy

# 加载英文模型
nlp = spacy.load("en_core_web_sm")

# 员工相关词汇
employee_terms = {"employee", "employees", "staff", "personnel", "headcount", "workforce"}

def find_employee_numbers(text):
    doc = nlp(text)
    results = []

    for i, token in enumerate(doc):
        # 找到关键词
        if token.lemma_.lower() in employee_terms:
            # 搜索附近5个词以内的数字
            for j in range(max(0, i-5), min(len(doc), i+6)):
                if doc[j].like_num:
                    try:
                        number = int(doc[j].text.replace(",", ""))
                        results.append({
                            "term": token.text,
                            "number": number,
                            "context": doc[max(0, j-3):min(len(doc), j+4)].text
                        })
                    except ValueError:
                        continue
    return results

# 示例文本
text = """
We currently employ 120 full-time staff and 30 part-time employees.
Our total workforce is about 150. The company had 98 employees in 2020.
Only 5 people manage the HR department.
"""

employee_data = find_employee_numbers(text)
for item in employee_data:
    print(item)
